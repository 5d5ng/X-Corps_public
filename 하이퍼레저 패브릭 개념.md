# 하이퍼레저 패브릭



![](https://www.markany.com/kr/wp-content/uploads/2018/08/hyperledger2_function.png)

## 비트코인,이더리움 vs Fabric

### 비트코인,이더리움

1. ##### 블록 생성자 = 스마트 컨트랙트 처리노드

2. ##### 개인키 기반

3. ##### 하나의 노드가 합의를 하기도 하고 블록을 생성하기도 하는 역할을 한다.

### Fabric

1. ##### 블록생성자 != 스마트 컨트랙트 처리노드

2. ##### Orderer = 블록생성만(블록체인을 보관하기도 하지만 참조만 할뿐)

3. ##### Peer = 시뮬레이팅과 블록체인을 보관하는 역할

4. ##### 인증서 기반으로 상호작용 => 중간관리자(CA)가 존재

5. ##### 하나의 키 값을 하나의 블록에서 여러 번 수정하는 것이 불가능하다.

   ###### ex) A =100 -> A=200으로 수정 불가능

6. ##### 각 노드 별로 역할이 주어져있다. 즉 합의하는 역할과 블록을 생성하는 역할 등으로 나누어져있다.

## Fabric 구성요소

### Peer

- 트랙잭션을 합의를 하는 역할을 한다.
- 거래를 시뮬레이팅 하는 역할을 한다.

### Orderer

- App으로 부터 요청받은 트랙잭션으로 블록을 생성하여 Peer에게 전달하는 역할을 한다.
- App이 요청한 트랜잭션으로 블록을 생성하기 전에 Peer들의 합의과정을 거쳤는지만 검증한다.
- 스마트컨트랙트가 어떤 내용으로 실행되었는지 어떤 내용이 있는 지는 검증하지 않는다.

### App(유저)

- 인증서,지갑에 해당하는 것을 가지고 거래를 가지고 Peer,Orderer와 상호작용하는 역할을 한다.

- 거래(트랜잭션)를 만들고 Peer들로 부터 허락을 받는다 이 과정을 Endorsement Policy라고 함. 

  

## Fabric 합의

- #### BFT



## Ledger

- 블록체인 - World State를 결정하는 모든 변경사항을 기록한다.
- World State - 원장 상태 집합의 현재 값을 보유하는 데이터베이스
- Peer만 Ledger를 활용한다. Orderer는 배포만한다.







